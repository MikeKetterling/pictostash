(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(25),s=n.n(c),i=(n(95),n(17)),l=n(5),o=n(10),r=(n(96),n(7)),j=n(2),u=n(16),d=n(87),b=n(83),m=n(88),h=n(1);var O=function(e){var t=e.setCurrentUser,n=e.setIsAuthenticated,c=e.setUserAlbums,s=Object(o.f)(),i=Object(a.useState)({username:"",email:"",password:""}),O=Object(l.a)(i,2),x=O[0],p=O[1],f=function(e){p(Object(j.a)(Object(j.a)({},x),{},Object(r.a)({},e.target.name,e.target.value)))};return Object(h.jsxs)("div",{className:"text-center d-flex flex-column align-items-center",children:[Object(h.jsx)("h2",{children:"Welcome to Pictostash!"}),Object(h.jsx)("br",{}),Object(h.jsxs)(d.a,{sm:8,children:[Object(h.jsxs)(b.a,{onSubmit:function(e){e.preventDefault();var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)};fetch("/login",a).then((function(e){e.ok?(e.json().then((function(e){t(e),n(!0),c(null===e||void 0===e?void 0:e.albums)})),s.push("/albumlist")):e.json().then((function(e){console.error(e)}))}))},children:[Object(h.jsx)(b.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:Object(h.jsx)(b.a.Control,{placeholder:"Username",type:"text",name:"username",value:x.username,onChange:function(e){return f(e)}})}),Object(h.jsx)(b.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:Object(h.jsx)(b.a.Control,{placeholder:"Password",type:"password",name:"password",value:x.password,onChange:function(e){return f(e)}})}),Object(h.jsx)(b.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:Object(h.jsx)(b.a.Control,{placeholder:"Email",type:"email",name:"email",value:x.email,onChange:function(e){return f(e)}})}),Object(h.jsx)("br",{}),Object(h.jsx)(m.a,{variant:"primary",type:"submit",children:"Submit"})]}),Object(h.jsx)("br",{})]}),Object(h.jsx)(u.b,{exact:!0,to:"/signup",children:"Don't have an account? Create one here"})]})};var x=function(e){var t=e.setCurrentUser,n=Object(o.f)(),c=Object(a.useState)({username:"",email:"",password:""}),s=Object(l.a)(c,2),i=s[0],O=s[1],x=function(e){O(Object(j.a)(Object(j.a)({},i),{},Object(r.a)({},e.target.name,e.target.value)))};return Object(h.jsxs)("div",{className:"text-center d-flex flex-column align-items-center",children:[Object(h.jsx)("h2",{children:"Create your account"}),Object(h.jsx)("br",{}),Object(h.jsx)(d.a,{sm:8,md:6,lg:4,children:Object(h.jsxs)(b.a,{onSubmit:function(e){e.preventDefault();var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)};fetch("/signup",a).then((function(e){e.ok?(e.json().then((function(e){t(e)})),n.push("/")):e.json().then((function(e){console.error(e)}))}))},children:[Object(h.jsx)(b.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:Object(h.jsx)(b.a.Control,{placeholder:"Username",type:"text",name:"username",value:i.username,onChange:function(e){return x(e)}})}),Object(h.jsx)(b.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:Object(h.jsx)(b.a.Control,{placeholder:"Password",type:"password",name:"password",value:i.password,onChange:function(e){return x(e)}})}),Object(h.jsx)(b.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:Object(h.jsx)(b.a.Control,{placeholder:"Email",type:"email",name:"email",value:i.email,onChange:function(e){return x(e)}})}),Object(h.jsx)("br",{}),Object(h.jsx)(m.a,{variant:"primary",type:"submit",children:"Submit"})]})}),Object(h.jsx)("br",{}),Object(h.jsx)(u.b,{to:"/",children:"Back to Log in Page"})]})},p=n(114),f=n(118),v=n(113),g=n(122),y=n(117),C={objectFit:"cover","max-height":"18rem","max-width":"18rem","min-height":"18rem","min-width":"18rem"};var w=function(e){var t=e.album,n=e.setActiveAlbum,c=e.deleteHandler,s=e.handleShowUpdate,i=Object(o.f)(),r=Object(a.useState)(!1),u=Object(l.a)(r,2),b=u[0],O=u[1],x=Object(a.useState)(""),f=Object(l.a)(x,2),w=f[0],S=f[1],N=Object(a.useRef)(null);return Object(a.useEffect)((function(){console.log("Inside AlbumCard useEffect");var e="/albums/".concat(t.id);fetch(e).then((function(e){return e.json()})).then((function(e){S(e.length>0?e[0].image_url:"https://picsum.photos/300/300")}))}),[]),Object(h.jsx)("div",{className:"album-card",children:Object(h.jsx)(d.a,{className:"my-5 mx-3",children:Object(h.jsxs)(g.a,{style:{minwidth:"18rem"},children:[Object(h.jsx)(g.a.Img,{variant:"top",src:w,style:C}),Object(h.jsxs)(g.a.Body,{style:{backgroundColor:"#deb185"},children:[Object(h.jsx)(g.a.Title,{style:{"margin-bottom":"15px"},children:t.name?t.name:"No title"}),Object(h.jsxs)(p.a,{className:"my-1",children:[Object(h.jsx)(d.a,{sm:6,children:Object(h.jsx)(m.a,{id:"view-btn",variant:"primary",onClick:function(){n(t),i.push("/album/".concat(t.id))},children:"View Album"})}),Object(h.jsx)(d.a,{sm:6,children:Object(h.jsx)(m.a,{id:"edit-btn",variant:"primary",onClick:function(){return s(t.name,t.description,t.location,t.date,t.id)},children:"Edit Details"})})]}),Object(h.jsxs)(p.a,{children:[Object(h.jsx)(d.a,{sm:8,children:Object(h.jsx)(m.a,{id:"delete-btn",variant:"danger",onClick:function(){return c(t.id)},children:"Delete Album"})}),Object(h.jsx)(d.a,{className:"d-flex justify-content-center align-items-center",children:Object(h.jsx)(y.a,{placement:"right",delay:{show:150,hide:200},overlay:function(e){return Object(h.jsxs)(v.a,Object(j.a)(Object(j.a)({id:"info-tooltip"},e),{},{children:[Object(h.jsxs)("p",{children:["Name: ",t.name]}),Object(h.jsxs)("p",{children:["Date: ",t.date]}),Object(h.jsxs)("p",{children:["Location: ",t.location]}),Object(h.jsxs)("p",{children:["Album Info: ",t.description]})]}))},children:Object(h.jsx)(m.a,{className:"btn-circle btn-sm",ref:N,onClick:function(){return O(!b)},children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-info-lg",viewBox:"0 0 16 16",children:Object(h.jsx)("path",{d:"m9.708 6.075-3.024.379-.108.502.595.108c.387.093.464.232.38.619l-.975 4.577c-.255 1.183.14 1.74 1.067 1.74.72 0 1.554-.332 1.933-.789l.116-.549c-.263.232-.65.325-.905.325-.363 0-.494-.255-.402-.704l1.323-6.208Zm.091-2.755a1.32 1.32 0 1 1-2.64 0 1.32 1.32 0 0 1 2.64 0Z"})})})})})]})]})]})})})};var S=function(e){var t=e.user,n=e.albums,c=e.addNewAlbum,s=(e.activeAlbum,e.setActiveAlbum),o=e.setUserAlbums,u=Object(a.useState)(!1),O=Object(l.a)(u,2),x=O[0],v=O[1],g=Object(a.useState)(!1),y=Object(l.a)(g,2),C=y[0],S=y[1],N=Object(a.useState)(!0),A=Object(l.a)(N,2),T=A[0],I=A[1],U=Object(a.useState)(!0),k=Object(l.a)(U,2),B=k[0],P=k[1],D=Object(a.useState)(!0),E=Object(l.a)(D,2),_=E[0],F=E[1],H=Object(a.useState)(!0),Y=Object(l.a)(H,2),L=Y[0],J=Y[1],z=Object(a.useState)({name:"",description:"",location:"",date:""}),G=Object(l.a)(z,2),M=G[0],q=G[1],R=Object(a.useState)({name:"",description:"",location:"",date:"",id:""}),V=Object(l.a)(R,2),W=V[0],X=V[1];function Z(){v(!1)}function Q(e,t,n,a,c){X({name:e,description:t,location:n,date:a,id:c}),S(!0)}function K(){S(!1)}var $=n.map((function(e){return Object(h.jsx)(w,{album:e,setActiveAlbum:s,deleteHandler:ae,handleShowUpdate:Q},e.id)}));function ee(e){var t=e.target.name,n=e.target.value;q(Object(j.a)(Object(j.a)({},M),{},Object(r.a)({},t,n)))}function te(e){var t=e.target.name,n=e.target.value;X(Object(j.a)(Object(j.a)({},W),{},Object(r.a)({},t,n)))}function ne(e){if(e.preventDefault(),0===M.name.length||0===M.description.length||0===M.location.length||0===M.date.length)""===M.name?I(!1):I(!0),""===M.description?P(!1):P(!0),""===M.location?F(!1):F(!0),""===M.date?J(!1):J(!0),console.log("I see you trying to submit baaaad data ='(");else{console.log("I see you trying to create a new album.");var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)};fetch("/albums",t).then((function(e){return e.json()})).then((function(e){c(e),q({name:"",description:"",location:"",date:""}),I(!0),P(!0),F(!0),J(!0)})),Z()}}function ae(e){var t=n.filter((function(t){return t.id!==e}));console.log(t),o(Object(i.a)(t)),fetch("/albums/".concat(e),{method:"DELETE"})}function ce(){if(console.log(n),""!==W.name&&""!==W.description&&""!==W.location&&""!==W.date){var e=n.map((function(e){return e.id===W.id?(console.log("here"),{name:W.name,description:W.description,location:W.location,date:W.date,id:W.id,user_id:t.id}):(console.log(e),e)}));console.log(e),o(Object(i.a)(e)),fetch("/albums/".concat(W.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)}).then((function(e){return e.json()})).then((function(e){console.log(e),K()}))}else console.log("cannot apply changes")}return Object(h.jsxs)("div",{className:"container image-list",children:[Object(h.jsx)(p.a,{children:Object(h.jsx)(d.a,{lg:12,children:Object(h.jsx)("h1",{className:"text-center my-5",children:(null===t||void 0===t?void 0:t.username)?"".concat(t.username.toUpperCase(),"'S ALBUMS"):"YOUR ALBUMS"})})}),Object(h.jsx)(p.a,{sm:"auto",className:"d-flex justify-content-center",children:$}),Object(h.jsx)(m.a,{className:"my-5 btn-circle btn-xl fixed-bottom",variant:"primary",onClick:function(){v(!0)},children:Object(h.jsx)("div",{children:Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",fill:"currentColor",class:"bi bi-plus-circle",viewBox:"0 0 16 16",children:[Object(h.jsx)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),Object(h.jsx)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})]})})}),Object(h.jsxs)(f.a,{show:x,onHide:Z,children:[Object(h.jsx)(f.a.Header,{closeButton:!0,children:Object(h.jsx)(f.a.Title,{children:"Create new Album"})}),Object(h.jsx)(f.a.Body,{children:Object(h.jsxs)(b.a,{onSubmit:ne,children:[Object(h.jsx)(b.a.Control,{type:"text",name:"name",placeholder:"album name",onChange:ee,value:M.name}),T?null:Object(h.jsx)(b.a.Text,{className:"invalid-input",style:{color:"red"},children:"You must enter a name."}),Object(h.jsx)(b.a.Control,{type:"text",name:"description",placeholder:"description",onChange:ee,value:M.description}),B?null:Object(h.jsx)(b.a.Text,{className:"invalid-input",style:{color:"red"},children:"You must enter a description."}),Object(h.jsx)(b.a.Control,{type:"text",name:"location",placeholder:"location",onChange:ee,value:M.location}),_?null:Object(h.jsx)(b.a.Text,{className:"invalid-input",style:{color:"red"},children:"You must enter a location."}),Object(h.jsx)(b.a.Control,{type:"date",name:"date",onChange:ee,value:M.date}),L?null:Object(h.jsx)(b.a.Text,{className:"invalid-input",style:{color:"red"},children:"You must enter a date."})]})}),Object(h.jsxs)(f.a.Footer,{children:[Object(h.jsx)(m.a,{variant:"secondary",onClick:Z,children:"Close"}),Object(h.jsx)(m.a,{type:"submit",variant:"primary",onClick:ne,children:"Create Album"})]})]}),Object(h.jsxs)(f.a,{show:C,onHide:K,children:[Object(h.jsx)(f.a.Header,{closeButton:!0,children:Object(h.jsx)(f.a.Title,{children:"Edit Your Details"})}),Object(h.jsx)(f.a.Body,{children:Object(h.jsxs)(b.a,{onSubmit:ce,children:[Object(h.jsx)(b.a.Text,{className:"invalid-input",children:"Album Name"}),Object(h.jsx)(b.a.Control,{type:"text",name:"name",placeholder:"album name",onChange:te,value:W.name}),""!==W.name?null:Object(h.jsx)(b.a.Text,{className:"invalid-input",style:{color:"red"},children:"You must enter a name."}),Object(h.jsx)(b.a.Text,{className:"invalid-input",children:"Description"}),Object(h.jsx)(b.a.Control,{type:"text",name:"description",placeholder:"description",onChange:te,value:W.description}),""!==W.description?null:Object(h.jsx)(b.a.Text,{className:"invalid-input",style:{color:"red"},children:"You must enter a description."}),Object(h.jsx)(b.a.Text,{className:"invalid-input",children:"Location"}),Object(h.jsx)(b.a.Control,{type:"text",name:"location",placeholder:"location",onChange:te,value:W.location}),""!==W.location?null:Object(h.jsx)(b.a.Text,{className:"invalid-input",style:{color:"red"},children:"You must enter a location."}),Object(h.jsx)(b.a.Text,{className:"invalid-input",children:"Date"}),Object(h.jsx)(b.a.Control,{type:"date",name:"date",onChange:te,value:W.date}),""!==W.date?null:Object(h.jsx)(b.a.Text,{className:"invalid-input",style:{color:"red"},children:"You must enter a date."})]})}),Object(h.jsxs)(f.a.Footer,{children:[Object(h.jsx)(m.a,{variant:"secondary",onClick:K,children:"Close"}),Object(h.jsx)(m.a,{type:"submit",variant:"primary",onClick:ce,children:"Apply Changes"})]})]})]})},N=n(56);var A=function(e){var t=e.imgUrl,n=e.handleShowImg,a=e.currId;return Object(h.jsx)("div",{className:"picture-card",children:Object(h.jsx)(d.a,{className:"my-5 mx-3",children:Object(h.jsxs)(g.a,{style:{width:"18rem"},children:[Object(h.jsx)(g.a.Img,{className:"card-img",variant:"top",src:t,style:{objectFit:"cover"}}),Object(h.jsx)(g.a.Body,{style:{backgroundColor:"#deb185",textAlign:"center"},children:Object(h.jsx)(m.a,{variant:"primary",onClick:function(){return n(a)},children:"View Image"})})]})})})},T=n(120);var I=function(e){var t,n=e.imgUrls,a=e.index,c=e.setIndex,s=(void 0!==(null===(t=n[0])||void 0===t?void 0:t.image_url)?n.map((function(e){return e.image_url})):n).map((function(e){return Object(h.jsx)(T.a.Item,{children:Object(h.jsx)("img",{className:"d-block w-100",src:e,alt:""})})}));return Object(h.jsx)(T.a,{activeIndex:a,onSelect:function(e){c(e)},children:s})};var U=function(e){var t=e.activeAlbum,n=["https://picsum.photos/500/500","https://picsum.photos/400/500","https://picsum.photos/500/400","https://picsum.photos/400/400","https://picsum.photos/600/500"],c=Object(a.useState)([]),s=Object(l.a)(c,2),r=s[0],j=s[1],u=Object(a.useState)(!1),O=Object(l.a)(u,2),x=O[0],v=O[1],g=Object(a.useState)(!1),y=Object(l.a)(g,2),C=y[0],w=y[1],S=Object(a.useState)(0),T=Object(l.a)(S,2),U=T[0],k=T[1],B=Object(a.useState)([]),P=Object(l.a)(B,2),D=P[0],E=P[1],_=Object(o.g)().pathname.split("/")[2];n.map((function(e){return Object(h.jsx)(A,{imgUrl:e,handleShowImg:Y})})),r.length>0&&r.map((function(e){return Object(h.jsx)(A,{imgUrl:e.image_url,handleShowImg:Y})}));var F=function(e){var t=0;return e.length>0?e.map((function(e){return Object(h.jsx)(A,{imgUrl:e.image_url,currId:t++,handleShowImg:Y},e.image_url)})):n.map((function(e){return Object(h.jsx)(A,{imgUrl:e,handleShowImg:Y},e+t)}))}(r);function H(){v(!1)}function Y(e){k(e),w(!0)}function L(e){e.preventDefault(),D.length>0?D[0]instanceof File?function(){var e,n=Object(N.a)(D);try{for(n.s();!(e=n.n()).done;){var a=e.value,c=new FormData;c.append("file",a),c.append("upload_preset","unsigned_user"),fetch("https://api.cloudinary.com/v1_1/flatironstudent/image/upload",{method:"POST",body:c}).then((function(e){return e.json()})).then((function(e){var n=e.secure_url,a={album_id:t.id,image_url:n},c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};fetch("/pictures",c).then((function(e){return e.json()})).then((function(e){j([].concat(Object(i.a)(r),[e]))}))}))}}catch(s){n.e(s)}finally{n.f()}E([]),H()}():console.log("State does not appear to contain image data to upload X_X"):console.log("Seeing empty upload attempt. Need to add error here.")}return Object(a.useEffect)((function(){var e="/albums/".concat(_);fetch(e).then((function(e){return e.json()})).then((function(e){console.log("Successful fetch - displaying results"),console.log(e),j(e)}))}),[t]),Object(h.jsxs)("div",{className:"container d-flex flex-column image-list",children:[Object(h.jsx)(p.a,{children:Object(h.jsx)(d.a,{lg:12,children:Object(h.jsx)("h1",{className:"text-center my-5",children:t.name})})}),Object(h.jsx)(p.a,{sm:"auto",className:"d-flex justify-content-center",children:F}),Object(h.jsx)(m.a,{className:"my-5 btn-circle btn-xl fixed-bottom",variant:"primary",onClick:function(){v(!0)},children:Object(h.jsx)("div",{children:Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",fill:"currentColor",className:"bi bi-plus-circle",viewBox:"0 0 16 16",children:[Object(h.jsx)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),Object(h.jsx)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})]})})}),Object(h.jsxs)(f.a,{show:x,onHide:H,children:[Object(h.jsx)(f.a.Header,{closeButton:!0,children:Object(h.jsx)(f.a.Title,{children:"Upload Photo"})}),Object(h.jsx)(f.a.Body,{children:Object(h.jsx)(b.a,{onSubmit:L,children:Object(h.jsx)(b.a.Control,{type:"file",onChange:function(e){var t=e.target.files;E(Object.values(t))},multiple:!0})})}),Object(h.jsxs)(f.a.Footer,{children:[Object(h.jsx)(m.a,{variant:"secondary",onClick:H,children:"Close"}),Object(h.jsx)(m.a,{type:"submit",variant:"primary",onClick:L,children:1===D.length?"Upload Photo":"Upload Photos"})]})]}),Object(h.jsx)(f.a,{show:C,onHide:function(){w(!1)},centered:!0,children:r.length>0?Object(h.jsx)(I,{imgUrls:r,index:U,setIndex:k}):Object(h.jsx)(I,{imgUrls:n,index:U,setIndex:k})})]})};var k=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1];function s(e){console.log(e.target);var t=e.target.files;console.log(Object.values(t)),c(Object.values(t))}return Object(h.jsxs)("div",{id:"container",children:[Object(h.jsx)("p",{children:"This component is a demonstration of a basic single file upload form"}),Object(h.jsx)("form",{id:"uploadForm",onSubmit:function(e){e.preventDefault(),console.log("Image upload in Sandbox currently disabled! But I see your submit request :D")},children:Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{type:"file",name:"file",onChange:s}),Object(h.jsx)("input",{type:"submit"})]})}),Object(h.jsx)("p",{children:"This component is a WIP for a muptliple file upload form"}),Object(h.jsxs)("form",{id:"multipleUploadForm",onSubmit:function(e){e.preventDefault(),console.log("I see you trying to submit - let's check state data"),console.log(n),n[0]instanceof File?(console.log("State data appears to contain at least one file!"),console.log("Proceeding to create a file upload request for each file.")):console.log("You're trying to trick me! There's no file here D'=")},onChange:s,children:[Object(h.jsx)("input",{type:"file",name:"files",onChange:s,multiple:!0}),Object(h.jsx)("input",{type:"submit"})]})]})},B=n(119),P=n(115),D=n(89),E=n(121),_=n(116);var F=function(e){var t=e.albums,n=e.setActiveAlbum,a=Object(o.f)(),c=t.map((function(e){return Object(h.jsx)(_.a.Item,{as:u.c,to:"/album/".concat(e.id),onClick:function(t){return function(e,t){console.log(t),n(t),a.push("/album")}(0,e)},children:e.name})}));return Object(h.jsx)(_.a,{title:"Album Quick Find",id:"offcanvasNavbarDropdown",children:c})};var H=function(e){var t=e.user,n=e.setCurrentUser,a=e.albums,c=e.setActiveAlbum,s=Object(o.f)();return console.log(a),Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(B.a,{bg:"primary",expand:!1,children:Object(h.jsxs)(P.a,{fluid:!0,children:[t?Object(h.jsx)(B.a.Brand,{as:u.c,to:"/albumlist",children:"Pictostash"}):Object(h.jsx)(B.a.Brand,{as:u.c,to:"/",children:"Pictostash"}),Object(h.jsx)(B.a.Toggle,{"aria-controls":"offcanvasNavbar"}),Object(h.jsxs)(B.a.Offcanvas,{id:"offcanvasNavbar","aria-labelledby":"offcanvasNavbarLabel",placement:"end",children:[Object(h.jsx)(D.a.Header,{closeButton:!0,children:Object(h.jsx)(D.a.Title,{id:"offcanvasNavbarLabel",children:"Pictostash"})}),Object(h.jsx)(D.a.Body,{children:Object(h.jsxs)(E.a,{className:"justify-content-end flex-grow-1 pe-3",children:[t?Object(h.jsxs)("h4",{children:["Hello ",t.username,"!"]}):null,t?Object(h.jsx)(m.a,{onClick:function(){fetch("/logout",{method:"DELETE"}).then((function(e){e.ok&&(n(null),s.push("/"))}))},children:"Logout"}):null,t?Object(h.jsx)(u.b,{to:"/albumlist",children:"All Albums"}):null,a.length>0?Object(h.jsx)(F,{albums:a,setActiveAlbum:c}):null]})})]})]})})})};var Y=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=(t[0],t[1]),c=Object(a.useState)([]),s=Object(l.a)(c,2),r=s[0],j=s[1],u=Object(a.useState)([]),d=Object(l.a)(u,2),b=d[0],m=d[1],p=Object(a.useState)([]),f=Object(l.a)(p,2),v=f[0],g=f[1];return Object(a.useEffect)((function(){fetch("/me").then((function(e){e.ok&&e.json().then((function(e){j(e),n(!0),m(null===e||void 0===e?void 0:e.albums)}))}))}),[]),console.log(r),Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(H,{user:r,setCurrentUser:j,albums:b,setActiveAlbum:g}),Object(h.jsxs)(o.c,{children:[Object(h.jsx)(o.a,{exact:!0,path:"/",children:Object(h.jsx)(O,{setUserAlbums:m,setIsAuthenticated:n,setCurrentUser:j})}),Object(h.jsx)(o.a,{exact:!0,path:"/signup",children:Object(h.jsx)(x,{setCurrentUser:j})}),Object(h.jsx)(o.a,{exact:!0,path:"/albumlist",children:Object(h.jsx)(S,{user:r,albums:b,addNewAlbum:function(e){m([].concat(Object(i.a)(b),[e]))},activeAlbum:v,setActiveAlbum:g,setUserAlbums:m})}),Object(h.jsx)(o.a,{exact:!0,path:"/album/:id",children:Object(h.jsx)(U,{activeAlbum:v})}),Object(h.jsx)(o.a,{exact:!0,path:"/sandbox",children:Object(h.jsx)(k,{})})]})]})};s.a.render(Object(h.jsx)(u.a,{children:Object(h.jsx)(Y,{})}),document.getElementById("root"))},95:function(e,t,n){}},[[107,1,2]]]);
//# sourceMappingURL=main.82474c27.chunk.js.map